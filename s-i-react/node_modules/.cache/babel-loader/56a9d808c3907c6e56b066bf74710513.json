{"ast":null,"code":"import _objectSpread from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Map,GoogleApiWrapper,InfoWindow,Marker}from'google-maps-react';import toastr from'../notification/Toastr';import geocode from'../controls/Geocode';var mapStyles={width:'100%',height:'100%'};var orderMap=/*#__PURE__*/function(_Component){_inherits(orderMap,_Component);function orderMap(){var _getPrototypeOf2;var _this;_classCallCheck(this,orderMap);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(orderMap)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={data:{init_conditions:{lat:8.500000,lng:4.550000,zoom:14},accessories:{showingInfoWindow:false,activeMarker:{},selectedPlace:{}},order:{pickup_address:{lat:\"\",lng:\"\"},C_location:{lat:\"\",lng:\"\"}}}};_this.handleMarkerClick=function(props,marker,e){var dataCopy=_objectSpread({},_this.state.data);dataCopy.accessories.selectedPlace=props;dataCopy.accessories.activeMarker=marker;dataCopy.accessories.showingInfoWindow=true;_this.setState({data:dataCopy});};_this.handleInfoClose=function(){var copyData=_objectSpread({},_this.state.data);if(_this.state.data.accessories.showingInfoWindow){copyData.accessories.showingInfoWindow=false;copyData.accessories.activeMarker=null;_this.setState({data:copyData});}};return _this;}_createClass(orderMap,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var token=sessionStorage.getItem('token');if(!token){toastr.warning('YOU ARE NOT SIGNED IN');this.props.history.push('/login');}else if(token){var queryId=this.props.match.params.id;console.log(this.props,queryId);fetch('https://s-i-api.herokuapp.com/api/v1/map?ordCk='+queryId,{method:\"GET\",headers:{Authorization:token}}).then(function(res){return res.json();}).then(function(data){var pickup_address=data[0].pickup_address;var c_location=data[0].c_location;var pickupData={field:'pickup_address',val:pickup_address};var cLocationData={field:'c_location',val:c_location};console.log(pickupData,cLocationData);geocode(pickupData,_this2);geocode(cLocationData,_this2);console.log(_this2.state);});}}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(\"h4\",null,\"WAREHOUSE,  PICKUP ADDRESS, DESTINATION ADDRESS\"),React.createElement(Map,{style:mapStyles,google:this.props.google,initialCenter:{lat:this.state.data.init_conditions.lat,lng:this.state.data.init_conditions.lng},zoom:this.state.data.init_conditions.zoom},React.createElement(Marker,{onClick:this.handleMarkerClick,name:'PAKAGE WAREHOUSE'}),React.createElement(InfoWindow,{marker:this.state.data.accessories.activeMarker,visible:this.state.data.accessories.showingInfoWindow,onClose:this.handleInfoClose},React.createElement(\"div\",null,this.state.data.accessories.selectedPlace.name))));}}]);return orderMap;}(Component);export default GoogleApiWrapper({apiKey:'AIzaSyDoduk96MV36i6RJFgvo80FqZTFBZj2k1M'})(orderMap);","map":{"version":3,"sources":["/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/src/components/Map.jsx"],"names":["React","Component","Map","GoogleApiWrapper","InfoWindow","Marker","toastr","geocode","mapStyles","width","height","orderMap","state","data","init_conditions","lat","lng","zoom","accessories","showingInfoWindow","activeMarker","selectedPlace","order","pickup_address","C_location","handleMarkerClick","props","marker","e","dataCopy","setState","handleInfoClose","copyData","token","sessionStorage","getItem","warning","history","push","queryId","match","params","id","console","log","fetch","method","headers","Authorization","then","res","json","c_location","pickupData","field","val","cLocationData","google","name","apiKey"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Map, GoogleApiWrapper,InfoWindow, Marker } from 'google-maps-react';\nimport toastr from '../notification/Toastr';\nimport geocode from '../controls/Geocode';\n\nconst mapStyles = {\n    width: '100%',\n    height: '100%'\n  };\n\n\nclass orderMap extends Component {\n\n    state={\n            data:{\n                init_conditions:{\n                    lat: 8.500000,\n                    lng: 4.550000,\n                    zoom: 14,\n                },\n                accessories:{\n                    showingInfoWindow: false,\n                    activeMarker: {}, \n                    selectedPlace: {}\n                },\n                order:{\n                        pickup_address:{\n                            lat: \"\",\n                            lng: \"\"\n                        },\n                        C_location:{\n                            lat: \"\",\n                            lng: \"\"\n                        }\n                }\n            }\n    };\n\ncomponentDidMount(){\nconst token = sessionStorage.getItem('token');\nif(!token){\n    toastr.warning('YOU ARE NOT SIGNED IN');\n        this.props.history.push('/login');\n}else if (token){\n\n        const queryId=this.props.match.params.id;\n        console.log(this.props, queryId)\n\n    fetch('https://s-i-api.herokuapp.com/api/v1/map?ordCk='+queryId,{\n                method:\"GET\",\n                headers:{ \n                Authorization : token\n                }\n\n} ).then(res=>{\n    return res.json();\n}).then(data=>{\n    const pickup_address = data[0].pickup_address;\n    const c_location = data[0].c_location;\n    const pickupData = {\n                field: 'pickup_address',\n                val: pickup_address\n    };\n    const cLocationData = {\n        field: 'c_location',\n        val: c_location\n};\n    console.log(pickupData, cLocationData)\n        geocode(pickupData, this);\n        geocode(cLocationData, this);\n    console.log(this.state)\n\n\n\n})\n\n}\n\n\n}\n\n\n\nhandleMarkerClick= (props, marker, e) =>{ \n    const dataCopy = {...this.state.data};\n        dataCopy.accessories.selectedPlace = props;\n        dataCopy.accessories.activeMarker = marker;\n        dataCopy.accessories.showingInfoWindow = true;\n        this.setState({\n            data: dataCopy\n        })\n}\n\n\nhandleInfoClose=()=>{\n   const copyData = {...this.state.data};\n   if(this.state.data.accessories.showingInfoWindow){\n    copyData.accessories.showingInfoWindow = false;\n    copyData.accessories.activeMarker = null;\n    this.setState({\n                data: copyData\n    })\n\n   } \n}\n\n\n  render() {\n    return (\n        <div>\n            <h4>WAREHOUSE,  PICKUP ADDRESS, DESTINATION ADDRESS</h4>\n            <Map style={mapStyles} \n            google={this.props.google}\n            initialCenter={{lat: this.state.data.init_conditions.lat,\n            lng: this.state.data.init_conditions.lng}}\n            zoom={this.state.data.init_conditions.zoom}>\n                <Marker onClick={this.handleMarkerClick} name={'PAKAGE WAREHOUSE'} />\n                <InfoWindow marker={this.state.data.accessories.activeMarker}\n                visible={this.state.data.accessories.showingInfoWindow} onClose={this.handleInfoClose} >\n                        <div>{this.state.data.accessories.selectedPlace.name}</div>\n                </InfoWindow>\n            </Map>\n            </div>\n\n    )\n  }\n}\n\nexport default GoogleApiWrapper({\n            apiKey: 'AIzaSyDoduk96MV36i6RJFgvo80FqZTFBZj2k1M'\n        })(orderMap)\n"]},"metadata":{},"sourceType":"module"}