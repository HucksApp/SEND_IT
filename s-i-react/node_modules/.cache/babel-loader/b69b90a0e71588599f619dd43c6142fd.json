{"ast":null,"code":"import _objectSpread from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import toastr from'../notification/Toastr';//COMPONENTS\nimport AdminOrdersList from'./AdminOrdersList';import AdminEdit from'./AdminEdit';//STYLES\nimport'../styles/AdminComp.css';var AdminComp=/*#__PURE__*/function(_Component){_inherits(AdminComp,_Component);function AdminComp(){var _getPrototypeOf2;var _this;_classCallCheck(this,AdminComp);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(AdminComp)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={data:{togCtrl:\"\",orderList:[]}};_this.handleLocation=function(data){console.log(data);var dataCopy=_objectSpread({},_this.state.data);var newList=dataCopy.orderList.map(function(order){if(order.user_email===data.userUpdateId&&order.order_id===parseInt(data.toUpdateId)){order.c_location=data.toUpdateLotn;return order;}else{return order;};});console.log(newList);dataCopy.orderList=newList;_this.setState({data:dataCopy});var adminToken=sessionStorage.getItem('adminToken');fetch('https://s-i-api.herokuapp.com/api/v1/update_location',{method:'PUT',headers:{\"Content-Type\":\"application/json\",Authorization:adminToken},body:JSON.stringify(data)}).then(function(response){console.log(response);toastr.success(\"ORDER \".concat(data.toUpdateId,\" BY USER \").concat(data.userUpdateId,\", LOCATION WAS UPDATED TO \").concat(data.toUpdateLotn));});};_this.handleStatus=function(data){console.log(data);var dataCopy=_objectSpread({},_this.state.data);var newList=dataCopy.orderList.map(function(order){if(order.user_email===data.userUpdateId&&order.order_id===parseInt(data.toUpdateId)){order.status=data.toUpdateStatus;return order;}else{return order;};});console.log(newList);dataCopy.orderList=newList;_this.setState({data:dataCopy});var adminToken=sessionStorage.getItem('adminToken');fetch('https://s-i-api.herokuapp.com/api/v1/update_status',{method:'PUT',headers:{\"Content-Type\":\"application/json\",Authorization:adminToken},body:JSON.stringify(data)}).then(function(response){console.log(response);toastr.success(\"ORDER \".concat(data.toUpdateId,\" BY USER \").concat(data.userUpdateId,\", STATUS WAS UPDATED TO \").concat(data.toUpdateStatus));});};return _this;}_createClass(AdminComp,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var adminToken=sessionStorage.getItem('adminToken');if(!adminToken){toastr.warning(\"CAN'T FIND ADMIN CREDENTIALS !!!\");this.props.history.push('/login');}else{fetch('https://s-i-api.herokuapp.com/api/v1/admin_orders',{headers:{Authorization:adminToken}}).then(function(res){return res.json();}).then(function(data){var datacopy=_objectSpread({},_this2.state.data);datacopy.orderList=data;_this2.setState({data:datacopy});console.log(_this2.state);}).catch(function(err){toastr.error('ERROR FETCHING THE ORDERS LISTS');});};}},{key:\"render\",value:function render(){if(this.state.data.orderList.length!==0){return React.createElement(\"div\",{className:\"admin_comp\"},React.createElement(\"h4\",{className:\"all_orders_title\"},\"ALL ORDERS LIST WITH CORRESPONDING USER\"),React.createElement(AdminOrdersList,{orders_list:this.state.data.orderList}),React.createElement(AdminEdit,{handleLocation:this.handleLocation,handleStatus:this.handleStatus}));}else{return React.createElement(\"div\",{className:\"admin_comp\"},React.createElement(\"h4\",{className:\"all_orders_title\",style:{color:'#fff'}},\"FETCHING  ALL ORDERS ...........\"));}}}]);return AdminComp;}(Component);export default AdminComp;","map":{"version":3,"sources":["/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/src/components/AdminComp.jsx"],"names":["React","Component","toastr","AdminOrdersList","AdminEdit","AdminComp","state","data","togCtrl","orderList","handleLocation","console","log","dataCopy","newList","map","order","user_email","userUpdateId","order_id","parseInt","toUpdateId","c_location","toUpdateLotn","setState","adminToken","sessionStorage","getItem","fetch","method","headers","Authorization","body","JSON","stringify","then","response","success","handleStatus","status","toUpdateStatus","warning","props","history","push","res","json","datacopy","catch","err","error","length","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport toastr from '../notification/Toastr' \n\n\n//COMPONENTS\nimport AdminOrdersList from './AdminOrdersList';\nimport AdminEdit from './AdminEdit';\n\n\n//STYLES\nimport '../styles/AdminComp.css'\n\nclass AdminComp extends Component {\n\n    state = { \n        data:{\n            togCtrl:\"\",\n            orderList:[]\n    \n        }\n    }\n\n\nhandleLocation = (data)=>{\nconsole.log(data)\n\n        const dataCopy = {...this.state.data};\n        const newList = dataCopy.orderList.map(order=>{\n            if (order.user_email === data.userUpdateId && order.order_id === parseInt(data.toUpdateId)){\n                order.c_location = data.toUpdateLotn\n                return order\n            }else{\n                return order\n            };\n        });\n\n        console.log(newList)\n\n       dataCopy.orderList = newList;\n\n        this.setState({\n            data: dataCopy\n        })\n    \n\nconst adminToken = sessionStorage.getItem('adminToken');\n\n    fetch('https://s-i-api.herokuapp.com/api/v1/update_location',{\n        method:'PUT',\n        headers:{\n            \"Content-Type\":\"application/json\",\n            Authorization: adminToken\n        },\n        body:JSON.stringify(data)\n    }).then((response)=>{\n    console.log(response);\n    toastr.success(`ORDER ${data.toUpdateId} BY USER ${data.userUpdateId}, LOCATION WAS UPDATED TO ${data.toUpdateLotn}`)\n    })\n}\n\nhandleStatus = (data)=>{\n    console.log(data)\n\n    const dataCopy = {...this.state.data};\n    const newList = dataCopy.orderList.map(order=>{\n        if (order.user_email === data.userUpdateId && order.order_id === parseInt(data.toUpdateId)){\n            order.status = data.toUpdateStatus\n            return order\n        }else{\n            return order\n        };\n    });\n\n    console.log(newList)\n\n   dataCopy.orderList = newList;\n\n    this.setState({\n        data: dataCopy\n    });\n    const adminToken = sessionStorage.getItem('adminToken');\n\n    fetch('https://s-i-api.herokuapp.com/api/v1/update_status',{\n                method:'PUT',\n                headers:{\n                    \"Content-Type\":\"application/json\",\n                    Authorization: adminToken\n                },\n                body:JSON.stringify(data)\n    }).then((response)=>{\n        console.log(response);\n        toastr.success(`ORDER ${data.toUpdateId} BY USER ${data.userUpdateId}, STATUS WAS UPDATED TO ${data.toUpdateStatus}`)\n    });\n\n\n}\n\n\n   \ncomponentDidMount(){\n\n    const adminToken = sessionStorage.getItem('adminToken');\n\n    if(!adminToken){\n        toastr.warning(\"CAN'T FIND ADMIN CREDENTIALS !!!\");\n        this.props.history.push('/login')\n    }else {\n\n    fetch('https://s-i-api.herokuapp.com/api/v1/admin_orders',{\n        headers:{\n            Authorization: adminToken\n        }\n\n    })\n        .then(res=>{\n        return res.json();\n    })\n        .then(data=>{\n            const datacopy={...this.state.data};\n                datacopy.orderList=data;\n                this.setState({\n                    data: datacopy\n                })\n            console.log(this.state)\n        })\n        .catch(err=>{toastr.error('ERROR FETCHING THE ORDERS LISTS')})\n};\n}\n\n  render() {\n\n        if(this.state.data.orderList.length !== 0 ){\n\n    return (\n      <div className=\"admin_comp\">\n          <h4 className=\"all_orders_title\">\n              ALL ORDERS LIST WITH CORRESPONDING USER\n          </h4>\n            <AdminOrdersList orders_list={this.state.data.orderList} />\n            <AdminEdit handleLocation={this.handleLocation} handleStatus={this.handleStatus} />\n      </div>\n    )\n        }else{\n\n\n            return (\n                   <div className=\"admin_comp\" >\n                       <h4 className=\"all_orders_title\" style={{color: '#fff'}}>\n                           FETCHING  ALL ORDERS ...........\n                       </h4>\n                   </div>\n            )\n        }\n  }\n  \n}\n\nexport default AdminComp\n"]},"metadata":{},"sourceType":"module"}