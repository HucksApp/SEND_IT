{"ast":null,"code":"import _toConsumableArray from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import toastr from'../notification/Toastr';//COMPONENTS\nimport Order from'./Order';import EditDestination from'./EditDestination';import CreateOrder from'./CreateOrder';export var Orders=/*#__PURE__*/function(_Component){_inherits(Orders,_Component);function Orders(){var _getPrototypeOf2;var _this;_classCallCheck(this,Orders);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Orders)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={data:{orderList:[],showEdit:\"close\",showCreate:\"close\"}};_this.handleDeleteUpdate=function(list,del){var deldataCopy=_objectSpread({},_this.state.data);deldataCopy.orderList=list;_this.setState({data:deldataCopy});var token=sessionStorage.getItem('token');fetch('https://s-i-api.herokuapp.com/api/v1/delete_order/'+del,{method:\"DELETE\",headers:{Authorization:token}}).then(function(res){console.log(res);toastr.info('YOU HAVE DELETED ORDER '+del);}).catch(function(err){return toastr.error('THERE WAS AN ERROR DELETING ORDER '+del);});};_this.handleDestinationUpdate=function(_ref){var upDestnAddress=_ref.upDestnAddress,ordId=_ref.ordId;var copyData=_objectSpread({},_this.state.data);var newList=copyData.orderList.map(function(order){if(order.order_id===parseInt(ordId)){order.destination_address=upDestnAddress;return order;}else{return order;}});copyData.orderList=newList;_this.setState({data:copyData});var token=sessionStorage.getItem('token');fetch('https://s-i-api.herokuapp.com/api/v1/update_destination',{method:\"PUT\",headers:{\"Content-Type\":\"application/json\",Authorization:token},body:JSON.stringify({upDestnAddress:upDestnAddress,ordId:ordId})}).then(function(res){toastr.info('YOU JUST UPDATED DESTINATION ADDRESS OF ORDER  '+ordId);}).catch(function(err){return toastr.error('THERE WAS AN ERROR UPDATING ORDER '+ordId);});};_this.handleUpdateOrder=function(data){var date=Date.now();var dateObj=new Date(date);var day=dateObj.getDate();var month=dateObj.getMonth();var year=dateObj.getFullYear();var dateString=year+\"-\"+month+\"-\"+day+\"Taaaa \";var id;if(_this.state.data.orderList.length!==0){id=_this.state.data.orderList[_this.state.data.orderList.length-1].order_id+1;}else{id=1;}var dataCopy=_objectSpread({},_this.state.data);console.log(data.date);data.date=dateString;var newOrder={order_id:id,receiver_name:data.receiverName,receiver_phone_no:data.receiverPhoneNumber,pickup_address:data.pickupAddress,destination_address:data.destinationAddress,order_date:data.date,c_location:'Newly Processed',status:'InTransit'};var newList=_toConsumableArray(dataCopy.orderList);newList.push(newOrder);dataCopy.orderList=newList;console.log(dataCopy);_this.setState({data:dataCopy});var token=sessionStorage.getItem('token');data.date=date;fetch('https://s-i-api.herokuapp.com/api/v1/new_order',{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:token},body:JSON.stringify(data)}).then(function(res){console.log(res);toastr.success(\"NEW ORDER ADDED TO ORDER LIST\");}).catch(function(err){return toastr.error('THERE WAS AN ERROR CREATING A NEW ORDER ');});};_this.handleClickCreate=function(){var newData=_objectSpread({},_this.state.data);if(newData.showCreate===\"close\"){newData.showCreate=\"open\";_this.setState({data:newData});}else if(newData.showCreate===\"open\"){newData.showCreate=\"close\";_this.setState({data:newData});}};_this.handleClickEdit=function(){var newData=_objectSpread({},_this.state.data);if(newData.showEdit===\"close\"){newData.showEdit=\"open\";_this.setState({data:newData});}else if(newData.showEdit===\"open\"){newData.showEdit=\"close\";_this.setState({data:newData});}};return _this;}_createClass(Orders,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var token=sessionStorage.getItem('token');if(!token){toastr.warning(\"YOU ARE NOT LOGGED IN\");this.props.history.push('/login');}else if(token){fetch('https://s-i-api.herokuapp.com/api/v1/order',{headers:{Authorization:token}}).then(function(res){return res.json();}).then(function(data){if(data.length===0){toastr.info('YOUR ORDERS LISTS IS STILL EMPTY');}else{var newData=_objectSpread({},_this2.state.data);newData.orderList=data;_this2.setState({data:newData});console.log(_this2.state);}}).catch(function(err){return toastr.error('THERE WAS AN ERROR GETTING THE PROFILE ORDERS');});}}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"orders\"},React.createElement(\"h3\",{className:\"orders-title\"},\"LIST OF ORDERS AND DELIVERY DETAILS\"),React.createElement(Order,{orderList:this.state.data.orderList,handleDeleteUpdate:this.handleDeleteUpdate}),React.createElement(\"button\",{onClick:this.handleClickEdit},\"EDIT DESTINATION\"),React.createElement(\"button\",{onClick:this.handleClickCreate},\"CREATE ORDER\"),React.createElement(EditDestination,{show:this.state.data.showEdit,handleDestinationUpdate:this.handleDestinationUpdate}),React.createElement(CreateOrder,{show:this.state.data.showCreate,updateOrder:this.handleUpdateOrder}));}}]);return Orders;}(Component);export default Orders;","map":{"version":3,"sources":["/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/src/components/Orders.jsx"],"names":["React","Component","toastr","Order","EditDestination","CreateOrder","Orders","state","data","orderList","showEdit","showCreate","handleDeleteUpdate","list","del","deldataCopy","setState","token","sessionStorage","getItem","fetch","method","headers","Authorization","then","res","console","log","info","catch","err","error","handleDestinationUpdate","upDestnAddress","ordId","copyData","newList","map","order","order_id","parseInt","destination_address","body","JSON","stringify","handleUpdateOrder","date","Date","now","dateObj","day","getDate","month","getMonth","year","getFullYear","dateString","id","length","dataCopy","newOrder","receiver_name","receiverName","receiver_phone_no","receiverPhoneNumber","pickup_address","pickupAddress","destinationAddress","order_date","c_location","status","push","success","handleClickCreate","newData","handleClickEdit","warning","props","history","json"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport toastr from '../notification/Toastr'\n\n//COMPONENTS\nimport Order from './Order';\nimport EditDestination from './EditDestination';\nimport CreateOrder from './CreateOrder';\n\nexport class Orders extends Component {\n\nstate = { \n    data:{\n        orderList:[],\n        showEdit:\"close\",\n        showCreate:\"close\"\n\n\n    },\n};\n\n\n\ncomponentDidMount(){\nconst token = sessionStorage.getItem('token');\nif(!token){\n    toastr.warning(\"YOU ARE NOT LOGGED IN\");\n    this.props.history.push('/login');\n\n}else if(token){\n\n    fetch('https://s-i-api.herokuapp.com/api/v1/order',{\n\n        headers:{\n            Authorization: token\n        }\n\n    }).then(res=>{return res.json()})\n    .then(data=>{\n        if(data.length === 0){\n\n            toastr.info('YOUR ORDERS LISTS IS STILL EMPTY')\n\n        }else {\n\n            const newData = {...this.state.data};\n            newData.orderList = data;\n            this.setState({\n                data: newData\n            });\n\n            console.log(this.state)\n\n        }\n       \n    }).catch(err=>toastr.error('THERE WAS AN ERROR GETTING THE PROFILE ORDERS'))\n\n\n}\n\n\n};\n\nhandleDeleteUpdate=(list, del)=>{\n\n    const deldataCopy = {...this.state.data};\n    deldataCopy.orderList = list;\n\n    this.setState({\n        data: deldataCopy\n    });\nconst token = sessionStorage.getItem('token');\n\n    fetch('https://s-i-api.herokuapp.com/api/v1/delete_order/'+del,{\n        method:\"DELETE\",\n        headers:{\n        Authorization: token\n        }\n            }).then(res=>{\n                console.log(res)\n                toastr.info('YOU HAVE DELETED ORDER '+ del)\n            }).catch(err=>toastr.error('THERE WAS AN ERROR DELETING ORDER '+ del))\n\n}\n\n\nhandleDestinationUpdate=({upDestnAddress,ordId})=>{\nconst copyData = {...this.state.data};\n    const newList = copyData.orderList.map(order=>{\n    if (order.order_id === parseInt(ordId)){\n        order.destination_address = upDestnAddress;\n            return order\n    }else{\n            return order;\n    }\n    });\n\n    copyData.orderList= newList;\n    this.setState({\n        data: copyData\n    })\n    const token = sessionStorage.getItem('token');\n\n    fetch('https://s-i-api.herokuapp.com/api/v1/update_destination',{\n                        method:\"PUT\",\n                        headers:{\n                            \"Content-Type\":\"application/json\",\n                            Authorization: token\n                        },\n                        body:JSON.stringify({upDestnAddress, ordId})\n        })\n        .then(res=>{\n                toastr.info('YOU JUST UPDATED DESTINATION ADDRESS OF ORDER  '+ ordId)\n\n        }).catch(err=>toastr.error('THERE WAS AN ERROR UPDATING ORDER '+ ordId))\n\n\n\n}\n\n\n\nhandleUpdateOrder=(data)=>{\n    let date = Date.now();\n    let dateObj= new Date(date);\n   let day = dateObj.getDate();\n    let month = dateObj.getMonth();\n    let year = dateObj.getFullYear();\n    let dateString = year + \"-\" + month +\"-\" + day+ \"Taaaa \";\n    let id\n    if(this.state.data.orderList.length !== 0){\n         id = this.state.data.orderList[this.state.data.orderList.length - 1].order_id + 1 ;\n    }else{\n        id= 1\n    }\n\n\n    const dataCopy = {...this.state.data};\n    console.log(data.date);\n    data.date= dateString;\n    const newOrder = {\n                order_id: id,\n                receiver_name: data.receiverName,\n                receiver_phone_no: data.receiverPhoneNumber,\n                pickup_address: data.pickupAddress,\n                destination_address: data.destinationAddress,\n                order_date: data.date,\n                c_location:'Newly Processed',\n                status:'InTransit'\n    };\n\n    const newList = [...dataCopy.orderList]\n                    newList.push(newOrder)\n                dataCopy.orderList = newList;\n\n    console.log(dataCopy)\n    this.setState({\n            data: dataCopy\n    })\n    const token = sessionStorage.getItem('token');\n    \n        data.date = date;\n        fetch('https://s-i-api.herokuapp.com/api/v1/new_order',{\n            method:\"POST\",\n            headers:{\n                \"Content-Type\":\"application/json\",\n                Authorization: token\n            },\n            body:JSON.stringify(data)\n        })\n            .then(res=>{\n                console.log(res)\n                toastr.success(\"NEW ORDER ADDED TO ORDER LIST\")\n            }).catch(err=>toastr.error('THERE WAS AN ERROR CREATING A NEW ORDER '))\n\n\n}\n\n\n\n\n\n\n\nhandleClickCreate=()=>{\n\n    const newData = {...this.state.data};\n    if(newData.showCreate === \"close\"){\n    newData.showCreate=\"open\";\n    this.setState({\n        data: newData\n    });\n}else if(newData.showCreate === \"open\"){\n    newData.showCreate =\"close\";\n    this.setState({\n        data: newData\n    });\n}\n\n}\n\n\n\n\n\n\nhandleClickEdit=()=>{\n\n    const newData = {...this.state.data};\n    if(newData.showEdit === \"close\"){\n    newData.showEdit=\"open\";\n    this.setState({\n        data: newData\n    });\n}else if(newData.showEdit === \"open\"){\n    newData.showEdit=\"close\";\n    this.setState({\n        data: newData\n    });\n}\n\n}\n\n\n\n  render() {\n    return (\n      <div className=\"orders\">\n            <h3 className=\"orders-title\">LIST OF ORDERS AND DELIVERY DETAILS</h3>\n            <Order orderList={this.state.data.orderList}  handleDeleteUpdate={this.handleDeleteUpdate} />\n            <button onClick={this.handleClickEdit} >EDIT DESTINATION</button>\n            <button  onClick={this.handleClickCreate}>CREATE ORDER</button>\n            <EditDestination  show={this.state.data.showEdit} handleDestinationUpdate={this.handleDestinationUpdate}/>\n            <CreateOrder show={this.state.data.showCreate} updateOrder={this.handleUpdateOrder} />\n        \n            \n      </div>\n    )\n  }\n}\n\nexport default Orders;\n"]},"metadata":{},"sourceType":"module"}