{"ast":null,"code":"import _objectSpread from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import toastr from'../notification/Toastr';//STYLES\nimport'../styles/Account.css';//COMPONENT\nimport AccEdit from'./AccEdit';import OrderSummary from'./OrderSumary';var Account=/*#__PURE__*/function(_Component){_inherits(Account,_Component);function Account(){var _getPrototypeOf2;var _this;_classCallCheck(this,Account);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Account)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={data:{user:{email:\"\",phone_number:\"\",username:\"\",user_password:\"\",address:\"\",order_counts:\"\"},show:\"not-active\",typ:\"\"}};_this.updateState=function(data){console.log(data);var nwdata=_objectSpread({},_this.state.data);var val=data.val,keyToValue=data.keyToValue;var field;switch(keyToValue){case'user-name':field='username';break;case'phone-number':field='phone_number';break;case'password':field='user_password';break;case'house-address':field='address';break;default:break;}nwdata.user[field]=val;_this.setState({data:nwdata});var payload={newVal:val,keyToValue:keyToValue};var token=sessionStorage.getItem('token');fetch('https://s-i-api.herokuapp.com/api/v1/update_profile',{method:\"PUT\",headers:{\"Content-Type\":\"application/json\",Authorization:token},body:JSON.stringify(payload)}).then(function(res){toastr.success(\"YOU JUST UPDATED YOUR \".concat(keyToValue,\" \"));toastr.info('CLOSE THE EDIT TAB \\n WITH THE EDIT BUTTON IN RED');}).catch(function(err){return toastr.error('THERE WAS AN ERROR UPDATING YOUR '+keyToValue);});};_this.handleEdit=function(e){console.log(e.target.type);var newState=_objectSpread({},_this.state);var typ=e.target.classList.value.split(' ')[1];newState.data.typ=typ;switch(_this.state.data.show){case'not-active':newState.data.show=\"active\";e.target.setAttribute('style','background-color: red');_this.setState({state:newState});break;case'active':newState.data.show=\"not-active\";e.target.setAttribute('style','background-color: blue');_this.setState({state:newState});break;default:newState.data.show=\"not-active\";_this.setState({state:newState});};console.log(typ);};return _this;}_createClass(Account,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var token=sessionStorage.getItem('token');if(!token){toastr.warning(\"YOU ARE NOT LOGGED IN\");this.props.history.push('/login');}else if(token){fetch('https://s-i-api.herokuapp.com/api/v1/account',{method:\"GET\",headers:{Authorization:token}}).then(function(res){return res.json();}).then(function(data){console.log(data);console.log(_this2.state);var newState=_objectSpread({},_this2.state.data);newState.user=data[0];_this2.setState({data:newState});}).catch(function(err){return toastr.error('THERE WAS AN ERROR FETCHING PROFILE');});}}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"account\"},React.createElement(\"div\",{className:\"user-container\"},React.createElement(\"div\",{className:\"compartment\"},React.createElement(\"h4\",{className:\"title\"},\"USERNAME\"),React.createElement(\"p\",{className:\"f-value\"},this.state.data.user.username,React.createElement(\"button\",{title:\"EDIT USERNAME\",className:\"edit user-name\",onClick:this.handleEdit},\"I\"))),React.createElement(\"div\",{className:\"compartment\"},React.createElement(\"h4\",{className:\"title\"},\"HOUSE ADDRESS\"),React.createElement(\"p\",{className:\"f-value\"},this.state.data.user.address,React.createElement(\"button\",{title:\"EDIT HOUSE ADDRESS\",className:\"edit house-address\",onClick:this.handleEdit},\"I\"))),React.createElement(\"div\",{className:\"compartment\"},React.createElement(\"h4\",{className:\"title\"},\"PHONE NUMBER\"),React.createElement(\"p\",{className:\"f-value\"},this.state.data.user.phone_number,React.createElement(\"button\",{title:\"EDIT PHONE NUMBER\",className:\"edit phone-number\",onClick:this.handleEdit},\"I\"))),React.createElement(\"div\",{className:\"compartment\"},React.createElement(\"h4\",{className:\"title\"},\"PASSWORD\"),React.createElement(\"p\",{className:\"f-value\"},this.state.data.user.user_password,React.createElement(\"button\",{title:\"EDIT PASSWORD\",className:\"edit password\",onClick:this.handleEdit},\"I\"))),React.createElement(\"div\",{className:\"compartment\"},React.createElement(\"h4\",{className:\"title\"},\"EMAIL\"),React.createElement(\"p\",{className:\"f-value\"},this.state.data.user.email)),React.createElement(\"div\",{className:\"compartment\"},React.createElement(\"h4\",{className:\"title\"},\"PROFILE ORDER SUM\"),React.createElement(\"p\",{className:\"f-value\"},this.state.data.user.order_counts))),React.createElement(AccEdit,{show:this.state.data.show,typ:this.state.data.typ,updateState:this.updateState}),React.createElement(OrderSummary,{orders:this.state.data}));}}]);return Account;}(Component);export default Account;","map":{"version":3,"sources":["/Users/Ahrabprince/Desktop/APPS/s-i-react/s-i-react/src/components/Account.jsx"],"names":["React","Component","toastr","AccEdit","OrderSummary","Account","state","data","user","email","phone_number","username","user_password","address","order_counts","show","typ","updateState","console","log","nwdata","val","keyToValue","field","setState","payload","newVal","token","sessionStorage","getItem","fetch","method","headers","Authorization","body","JSON","stringify","then","res","success","info","catch","err","error","handleEdit","e","target","type","newState","classList","value","split","setAttribute","warning","props","history","push","json"],"mappings":"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","sourcesContent":["import React,{ Component } from 'react';\nimport toastr from '../notification/Toastr'\n\n//STYLES\nimport '../styles/Account.css'\n\n\n//COMPONENT\nimport AccEdit from './AccEdit';\nimport OrderSummary from './OrderSumary';\n\nclass Account extends Component {\n\nstate = {\n        data:{\n            user:{\n                email: \"\",\n                phone_number: \"\",\n                username: \"\",\n                user_password: \"\",\n                address: \"\",\n                order_counts: \"\"\n            },\n            show:\"not-active\",\n            typ:\"\"\n        }\n};\n\n\nupdateState=(data)=>{\nconsole.log(data)\nconst nwdata = {...this.state.data};\nconst { val, keyToValue}= data;\nlet field;\n\nswitch(keyToValue){\n\ncase 'user-name':\n    field='username';\n    break;\ncase 'phone-number':\n    field='phone_number';\n    break;\ncase 'password':\n    field='user_password';\n    break;\ncase 'house-address':\n    field= 'address'\n    break;\ndefault:\n     break;\n\n}\nnwdata.user[field] = val;\n\nthis.setState({\n            data: nwdata\n});\n\nconst payload = {\n            newVal: val,\n            keyToValue\n};\n\nconst token =sessionStorage.getItem('token');\n\nfetch('https://s-i-api.herokuapp.com/api/v1/update_profile',{\n    method:\"PUT\",\n    headers:{\n        \"Content-Type\":\"application/json\",\n        Authorization: token\n    },\n    body: JSON.stringify(payload)\n}).then(res=>{\n    toastr.success(`YOU JUST UPDATED YOUR ${keyToValue} `);\n    toastr.info('CLOSE THE EDIT TAB \\n WITH THE EDIT BUTTON IN RED')\n}).catch(err=>toastr.error('THERE WAS AN ERROR UPDATING YOUR '+ keyToValue))\n\n\n\n\n\n};\n\n\n\ncomponentDidMount(){\n\nconst token = sessionStorage.getItem('token'); \nif(!token){\n    toastr.warning(\"YOU ARE NOT LOGGED IN\")\n    this.props.history.push('/login')\n\n}else if(token){\n\n    fetch('https://s-i-api.herokuapp.com/api/v1/account',{\n        method:\"GET\",\n        headers:{\n            Authorization : token\n        }\n}).then(res=>{return res.json()\n}).then(data=>{\n    console.log(data)\n    console.log(this.state)\nconst newState = {...this.state.data};\nnewState.user = data[0];\nthis.setState({\n        data: newState\n})\n\n}).catch(err=>toastr.error('THERE WAS AN ERROR FETCHING PROFILE'))\n\n}\n\n};\n\n\nhandleEdit=(e)=>{\n    console.log(e.target.type)\nconst newState= {...this.state};\n const typ = e.target.classList.value.split(' ')[1];\n newState.data.typ = typ;\n\nswitch(this.state.data.show){\n\n    case 'not-active':\n        newState.data.show= \"active\";\n     e.target.setAttribute('style','background-color: red')\n\n        this.setState({\n            state: newState\n        });\n    break;\n    case 'active':\n        newState.data.show= \"not-active\";\n        e.target.setAttribute('style','background-color: blue')\n        this.setState({\n            state: newState\n        });\n    break;\n    default:\n        newState.data.show= \"not-active\";\n        this.setState({\n            state: newState\n        });   \n};\nconsole.log(typ)\n\n    \n}\n\n\n\n    render(){\n    \n    return (\n      <div className=\"account\">\n          <div className=\"user-container\">\n                <div className=\"compartment\">\n                    <h4 className=\"title\">USERNAME</h4>\n                    <p className=\"f-value\">{this.state.data.user.username}<button title=\"EDIT USERNAME\"className=\"edit user-name\" onClick={this.handleEdit}>I</button></p>\n                </div>\n                <div className=\"compartment\">\n                    <h4 className=\"title\">HOUSE ADDRESS</h4>\n                    <p className=\"f-value\">{this.state.data.user.address}<button  title=\"EDIT HOUSE ADDRESS\"className=\"edit house-address\" onClick={this.handleEdit}>I</button></p>\n                </div>\n                <div className=\"compartment\">\n                    <h4 className=\"title\">PHONE NUMBER</h4>\n                    <p className=\"f-value\">{this.state.data.user.phone_number}<button title=\"EDIT PHONE NUMBER\" className=\"edit phone-number\" onClick={this.handleEdit}>I</button></p>\n                </div>\n                <div className=\"compartment\">\n                    <h4 className=\"title\">PASSWORD</h4>\n                    <p className=\"f-value\">{this.state.data.user.user_password}<button title=\"EDIT PASSWORD\" className=\"edit password\" onClick={this.handleEdit}>I</button></p>\n                </div>\n                <div className=\"compartment\">\n                    <h4 className=\"title\">EMAIL</h4>\n                    <p className=\"f-value\">{this.state.data.user.email}</p>\n                </div>\n                <div className=\"compartment\">\n                    <h4 className=\"title\">PROFILE ORDER SUM</h4>\n                    <p className=\"f-value\">{this.state.data.user.order_counts}</p>\n                </div>\n        </div>\n        <AccEdit  show={this.state.data.show}  typ={this.state.data.typ}  updateState={this.updateState}/>\n        <OrderSummary  orders={this.state.data} />\n      </div>\n    );\n    }\n  }\n  \n  export default Account;\n  "]},"metadata":{},"sourceType":"module"}